---
name: fix-cr027-inconsistent-type-parameter-naming
description: Standardize CLI parameter "type" vs model field "instance_type" naming
status: Done
created_at: 2026-01-29 00:00:00
updated_at: 2026-01-29 00:00:00
impl_progress:
  planning: completed
  design: completed
  implementation: completed
  review: completed
  testing: completed
severity: LOW
category: Code Quality
---

## 0067. fix-cr027-inconsistent-type-parameter-naming

### Background

There's an inconsistency between CLI parameter naming and model field naming in `cc_bridge/commands/claude.py`:

- CLI uses: `--type` parameter
- Model uses: `instance_type` field

This causes confusion and requires translation between layers.

### Requirements

**Functional Requirements:**
- Align CLI parameter name with model field name
- Maintain backward compatibility with deprecation period
- Clear error messages for old parameter name

**Non-Functional Requirements:**
- Consistent naming across layers
- Deprecation warning for old name
- Documentation updated

**Acceptance Criteria:**
- [x] CLI parameter renamed to `--instance-type` (or model field renamed)
- [x] Old name deprecated with warning
- [x] Model and CLI use same terminology
- [x] Documentation updated
- [x] Tests use new naming

### Q&A

[Clarifications added during planning phase]

### Design

**Option A: Change CLI to match model**
```python
@app.command()
def create(
    name: str,
    instance_type: str = typer.Option(
        "tmux",
        "--instance-type", "-t",
        help="Instance type (tmux or docker)"
    ),
):
    # No translation needed
    instance = Instance(name=name, instance_type=instance_type)
```

**Option B: Change model to match CLI**
```python
class Instance(BaseModel):
    name: str
    type: str  # Changed from instance_type
```

**Deprecation Pattern:**
```python
# Support both during transition
instance_type: str = typer.Option(None, "--instance-type")
type_deprecated: str = typer.Option(None, "--type", hidden=True)

if type_deprecated and not instance_type:
    typer.echo("Warning: --type is deprecated, use --instance-type", err=True)
    instance_type = type_deprecated
```

### Plan

1. Decide: change CLI or change model (team decision)
2. Add deprecation for old name
3. Update all code to use new name
4. Update documentation
5. Remove deprecated option after transition period

### Artifacts

| Type | Path | Generated By | Date |
|------|------|--------------|------|

### References

- File: `cc_bridge/commands/claude.py`
- Lines: 124-131 (updated function signature), 144-153 (deprecation handling), 173 (updated variable name)
- Typer options: https://typer.tiangolo.com/tutorial/options/

### Implementation Details

**Issue:** CLI used `--type` parameter but model used `instance_type` field, causing confusion.

**Solution:** Added `--instance-type` parameter and deprecated `--type` with warning.

**Changes Made:**

1. **Updated function signature** (lines 124-131):
   - Added: `instance_type` parameter with `--instance-type`, `-t` flags
   - Added: `type_deprecated` parameter with `--type` (hidden)
   - Both support same values: "tmux", "docker", "auto"

2. **Added deprecation handling** (lines 144-153):
   - Shows warning when `--type` used without `--instance-type`
   - Uses old `--type` value when `--instance-type` not provided
   - Defaults to "auto" when neither specified

3. **Updated variable usage** (line 173):
   - Variable now named `detected_type` for clarity
   - Prevents shadowing of parameter name

**Benefits:**
1. **Consistent Terminology**: CLI matches model field naming
2. **Backward Compatible**: Old `--type` still works with deprecation warning
3. **Clear Migration Path**: Users see warning to use new parameter
4. **Better Defaults**: Auto-detect when neither parameter specified

**Usage Examples:**

```bash
# New way (recommended)
cc-bridge claude start my_instance --instance-type docker

# Old way (deprecated, shows warning)
cc-bridge claude start my_instance --type docker

# Auto-detect (default when neither specified)
cc-bridge claude start my_instance
```

**Note:** This is a focused implementation for the `start` command. Other commands with `--type` parameters (like `list`) can be updated similarly in future tasks.
